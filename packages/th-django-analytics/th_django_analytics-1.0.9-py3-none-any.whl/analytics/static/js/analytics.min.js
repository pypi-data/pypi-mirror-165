import"https://code.jquery.com/jquery-3.6.0.min.js";import"https://cdn.jsdelivr.net/npm/chart.js";class AnalyticsCore{constructor(config=DASHBOARD_CONTEXT){this.dashboard_config=this.validate(config)}build_error_html_template(context=null,error=null){switch(context){case"card":return'<div class="card-box hover" style="opacity: 0.5; border: 2px solid rgba(255, 0, 0, 0.253); "><img src="https://img.icons8.com/stickers/100/000000/error.png" style="width: 80px;" /><span  style="font-size:auto !important;  margin:10px 50px !important; text-align: center;">'+error+"</span></div>";case"chart":return'<div class="chart-box hover" style="opacity: 0.5; border: 2px solid rgba(255, 0, 0, 0.253); display: flex; align-items: center; justify-content: center;"><img src="https://img.icons8.com/stickers/100/000000/error.png" style="width: 80px;" /><span  style="font-size:auto !important; margin:10px 50px !important; text-align: center;">'+error+"</span></div>";default:return'<div class="chart-box hover" style="opacity: 0.5;box-shadow:none;  display: flex; align-items: center; justify-content: center;"><img src="https://img.icons8.com/stickers/100/000000/error.png" style="width: 80px; margin-bottom:20px;" /><span  style="font-size:auto !important; margin:10px 50px !important; text-align: center;">Ops\n, estamos com alguns problemas por aqui...<br/>'+context+"</span></div>'>"}}build_figure_context(value,index){var figure={id:null,template:null,type:null,config:null};try{var figureType=value.type,figureTypeMacro=value.type.includes("card")?"card":"chart",figureId=figureType+"-"+index,figureConfig=value.config,figureTitle=value.title;figure.id=figureId,figure.config=figureConfig,figure.type=figureType,figure.title=figureTitle,figure.template=this.build_html_template(figureId,figureTitle,figureConfig)}catch(exception){figure.type=value.type,figure.template=this.build_error_html_template(figureTypeMacro,exception)}return figure}build_charts(id,type,config){try{var elemt=document.getElementById(id);return elemt&&"card_box"!=type&&config&&new Chart(elemt,config),!0}catch(exception){return console.error("erro ao criar gr치fico do tipo:"+type+" id:"+id+" erro:"+exception),!1}}build_html_template(id,title,context){return"card"==context.type&&void 0===context.data.value?this.build_error_html_template("card","Contexto inv치lido"):"card"==context.type?'<div class="card-box hover '+id+'"><h1 class="l-text">'+context.data.value+'</h1><span class="m-text">'+title+"</span></div>":'<div class="chart-box hover '+id+'"><div class="chart-header"><h1 class="header-text">'+title+'</h1></div> <canvas id="'+id+'" ></canvas></div>'}validate(config=this.dashboard_config){if(void 0===config.dashboardName||void 0===config.context)throw $("myDashboard").append(this.build_error_html_template(null,"Contexto inv치ldo")),new Error("Contexto inv치ldo ");return config}render(context,interval=1e3){var containerObj=document.createElement("div");return containerObj.setAttribute("class","container"),$("myDashboard").toggle(),context.forEach(element=>{var id=element.id,type=element.type,config=element.config,template=element.template;containerObj.innerHTML+=template,$("myDashboard").append(containerObj),setTimeout(()=>this.build_charts(id,type,config),interval)}),setTimeout(()=>$("myDashboard").fadeIn("slow","linear"),interval),!0}process(dashboard=this.dashboard_config){var processed_context=[];return dashboard.context.map((figure,index)=>{let new_fig_context=this.build_figure_context(figure,index);processed_context.push(new_fig_context)}),processed_context}run(){let processed_context=this.process(),is_loaded;this.render(processed_context)&&console.info("dashboard processado com sucesso 游뗵")}}var dashboard=new AnalyticsCore;dashboard.run();