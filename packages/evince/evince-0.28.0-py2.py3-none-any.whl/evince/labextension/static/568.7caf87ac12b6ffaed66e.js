(self.webpackChunkevince=self.webpackChunkevince||[]).push([[568],{580:(e,i,t)=>{var o=t(337),n=t(431),s=t(155);t(267);var r=o.DOMWidgetModel.extend({defaults:n.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"BraketModel",_view_name:"BraketView",_model_module:"evince",_view_module:"evince",_model_module_version:"0.1.0",_view_module_version:"0.1.0"})}),l=o.DOMWidgetView.extend({render:function(){const e=new s.Scene;this.scene=e;let i=new s.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);this.camera=i,i.position.z=5;const t=new s.WebGLRenderer;this.renderer=t,t.setSize(.5*window.innerWidth,.5*window.innerHeight),this.renderer.setClearColor(986927,1),t.antialias=!0,this.controls=new s.OrbitControls(this.camera,this.renderer.domElement),this.init_changed(),this.el.append(this.renderer.domElement),this.ao_changed(),this.model.on("change:init",this.init_changed,this),this.model.on("change:ao",this.ao_changed,this),this.animate()},animate:function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera);for(let e=0;e<this.scene.children.length;e++)performance.now(),this.scene.children[e].material.uniforms.time.value+=1e-4},init_changed:function(){this.pos=this.model.get("pos"),this.masses=this.model.get("masses"),this.colors=this.model.get("colors");for(let e=0;e<this.pos.length;e++){let i=new s.MeshStandardMaterial({color:"rgb("+[this.colors[e][0],this.colors[e][1],this.colors[e][2]].join(",")+")"});i.metalness=.1;let t=new s.SphereGeometry(.1*this.masses[e]),o=new s.Mesh(t,i);o.position.x=this.pos[e][0],o.position.y=this.pos[e][1],o.position.z=this.pos[e][2],this.scene.add(o),t.dispose(),i.dispose()}new s.AmbientLight(2105376,5),new s.DirectionalLight(16777215,.5).position.set(1,1,1)},pos_changed:function(){this.pos=this.model.get("pos");for(let e=0;e<this.pos.length;e++){let i=this.pos[e],t=this.scene.children[e];t.position.x=i[0],t.position.y=i[1],t.position.z=i[2]}},surf_changed:function(){this.surf=this.model.get("surf");for(let e=0;e<this.surf.length;e++){let e=new s.ShaderMaterial({uniforms:{time:{value:0},resolution:{value:new s.Vector2}},vertexShader:"uniform float time;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            varying vec3 pos;\n            varying vec3 tex;\n\n            void main() {\n                vUv = uv;\n                pos = vec3(position.x, position.y, position.z);\n                tex = vec3(position.x+time, position.y, position.z);\n                //pos = vec3(position.x + time * resolution.x, position.y + time * resolution.y, position.z);\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n            }",fragmentShader:"uniform vec3 user_color;\nuniform float time;\n\nvarying vec2 vUv;\nvarying vec3 pos;\nvarying vec3 tex;\nvarying float q;\n\nvoid main() {\n\nvec2 p = vUv;\nfloat q = tex[0]*tex[0] + tex[1]*tex[1] + tex[2]*tex[2];\n\n    gl_FragColor = gl_FragColor + .01*vec4(.5 + 1.7369481664870148*sqrt(15)*pow(3.141592653589793, -0.75)*tex[2]*(pow(tex[0], 2) - pow(tex[1], 2))*exp(-pow(tex[0], 2) - pow(tex[1], 2) - pow(tex[2], 2)), 0.2, 0.5, 0.5);\n}",side:s.DoubleSide,blending:s.SubtractiveBlending});e.depthWrite=!1;let i=new s.BufferGeometry;i.setIndex(this.surf[1]),i.addAttribute("position",new s.Float32BufferAttribute(this.surf[0],3)),new s.Mesh(i,e)}},ao_changed:function(){this.ao=this.model.get("ao");var e=this.model.get("fragment_shader");console.log("ao changed");let i=new s.ShaderMaterial({uniforms:{time:{value:1},resolution:{value:new s.Vector2}},vertexShader:"uniform float time;\n        uniform vec2 resolution;\n        varying vec2 vUv;\n        varying vec3 pos;\n        varying vec3 tex;\n\n        void main() {\n            vUv = uv;\n            pos = vec3(position.x, position.y, position.z);\n            tex = vec3(position.x, position.y, position.z);\n            //pos = vec3(position.x + time * resolution.x, position.y + time * resolution.y, position.z);\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n        }",fragmentShader:e,side:s.DoubleSide,blending:s.AdditiveBlending});i.depthWrite=!1;for(let e=1;e<200;e++){let t=new s.SphereBufferGeometry(.05*e,10,10),o=new s.Mesh(t,i);this.scene.add(o)}}});e.exports={BraketModel:r,BraketView:l}},163:(e,i,t)=>{var o=t(337),n=t(431),s=o.DOMWidgetModel.extend({defaults:n.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"HelloModel",_view_name:"HelloView",_model_module:"evince",_view_module:"evince",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"Hello World!"})}),r=o.DOMWidgetView.extend({render:function(){this.value_changed(),this.model.on("change:value",this.value_changed,this)},value_changed:function(){this.el.textContent=this.model.get("value")}});e.exports={HelloModel:s,HelloView:r}},568:(e,i,t)=>{e.exports=t(163),e.exports=t(580),e.exports.version=t(147).version},147:e=>{"use strict";e.exports={version:"0.1.0"}}}]);