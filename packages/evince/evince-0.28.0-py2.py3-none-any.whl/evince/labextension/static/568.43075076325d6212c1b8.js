(self.webpackChunkevince=self.webpackChunkevince||[]).push([[568,679],{580:(e,t,n)=>{var o=n(337),i=n(431),s=n(155);s.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new s.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var n=this,o=1e-6,i=new s.Vector2,a=new s.Vector2,r=new s.Vector2,c=new s.Vector2,d=new s.Vector2,l=new s.Vector2,h=new s.Vector3,p=new s.Vector3,u=new s.Vector2,m=new s.Vector2,v=new s.Vector2,f=0,g=0,y=1,w=new s.Vector3,b=new s.Vector3,x=new s.Quaternion,M=-1,_=M;this.target0=this.target.clone(),this.position0=this.object.position.clone();var E=(new s.Quaternion).setFromUnitVectors(e.up,new s.Vector3(0,1,0)),S=E.clone().inverse(),V={type:"change"},k={type:"start"},P={type:"end"};function j(){return 2*Math.PI/60/60*n.autoRotateSpeed}function L(){return Math.pow(.95,n.zoomSpeed)}function D(e){if(!1!==n.enabled){e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(0===_){if(!0===n.noRotate)return;a.set(e.clientX,e.clientY),r.subVectors(a,i),n.rotateLeft(2*Math.PI*r.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*r.y/t.clientHeight*n.rotateSpeed),i.copy(a)}else if(1===_){if(!0===n.noZoom)return;m.set(e.clientX,e.clientY),v.subVectors(m,u),v.y>0?n.dollyIn():n.dollyOut(),u.copy(m)}else if(2===_){if(!0===n.noPan)return;d.set(e.clientX,e.clientY),l.subVectors(d,c),n.pan(l.x,l.y),c.copy(d)}n.update()}}function O(){!1!==n.enabled&&(document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",O,!1),n.dispatchEvent(P),_=M)}function z(e){if(!1!==n.enabled&&!0!==n.noZoom){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?n.dollyOut():n.dollyIn(),n.update(),n.dispatchEvent(k),n.dispatchEvent(P)}}this.rotateLeft=function(e){void 0===e&&(e=j()),g-=e},this.rotateUp=function(e){void 0===e&&(e=j()),f-=e},this.panLeft=function(e){var t=this.object.matrix.elements;h.set(t[0],t[1],t[2]),h.multiplyScalar(-e),w.add(h)},this.panUp=function(e){var t=this.object.matrix.elements;h.set(t[4],t[5],t[6]),h.multiplyScalar(e),w.add(h)},this.pan=function(e,t){var o=n.domElement===document?n.domElement.body:n.domElement;if(void 0!==n.object.fov){var i=n.object.position.clone().sub(n.target).length();i*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e*i/o.clientHeight),n.panUp(2*t*i/o.clientHeight)}else void 0!==n.object.top?(n.panLeft(e*(n.object.right-n.object.left)/o.clientWidth),n.panUp(t*(n.object.top-n.object.bottom)/o.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=L()),y/=e},this.dollyOut=function(e){void 0===e&&(e=L()),y*=e},this.update=function(){var e=this.object.position;p.copy(e).sub(this.target),p.applyQuaternion(E);var t=Math.atan2(p.x,p.z),n=Math.atan2(Math.sqrt(p.x*p.x+p.z*p.z),p.y);this.autoRotate&&this.rotateLeft(j()),t+=g,n+=f,n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(o,Math.min(Math.PI-o,n));var i=p.length()*y;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(w),p.x=i*Math.sin(n)*Math.sin(t),p.y=i*Math.cos(n),p.z=i*Math.sin(n)*Math.cos(t),p.applyQuaternion(S),e.copy(this.target).add(p),this.object.lookAt(this.target),g=0,f=0,y=1,w.set(0,0,0),(b.distanceToSquared(this.object.position)>o||8*(1-x.dot(this.object.quaternion))>o)&&(this.dispatchEvent(V),b.copy(this.object.position),x.copy(this.object.quaternion))},this.reset=function(){_=M,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.domElement.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),this.domElement.addEventListener("mousedown",(function(e){if(!1!==n.enabled){if(e.preventDefault(),0===e.button){if(!0===n.noRotate)return;_=0,i.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===n.noZoom)return;_=1,u.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===n.noPan)return;_=2,c.set(e.clientX,e.clientY)}document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",O,!1),n.dispatchEvent(k)}}),!1),this.domElement.addEventListener("mousewheel",z,!1),this.domElement.addEventListener("DOMMouseScroll",z,!1),this.domElement.addEventListener("touchstart",(function(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!0===n.noRotate)return;_=3,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===n.noZoom)return;_=4;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(t*t+o*o);u.set(0,s);break;case 3:if(!0===n.noPan)return;_=5,c.set(e.touches[0].pageX,e.touches[0].pageY);break;default:_=M}n.dispatchEvent(k)}}),!1),this.domElement.addEventListener("touchend",(function(){!1!==n.enabled&&(n.dispatchEvent(P),_=M)}),!1),this.domElement.addEventListener("touchmove",(function(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(!0===n.noRotate)return;if(3!==_)return;a.set(e.touches[0].pageX,e.touches[0].pageY),r.subVectors(a,i),n.rotateLeft(2*Math.PI*r.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*r.y/t.clientHeight*n.rotateSpeed),i.copy(a),n.update();break;case 2:if(!0===n.noZoom)return;if(4!==_)return;var o=e.touches[0].pageX-e.touches[1].pageX,s=e.touches[0].pageY-e.touches[1].pageY,h=Math.sqrt(o*o+s*s);m.set(0,h),v.subVectors(m,u),v.y>0?n.dollyOut():n.dollyIn(),u.copy(m),n.update();break;case 3:if(!0===n.noPan)return;if(5!==_)return;d.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(d,c),n.pan(l.x,l.y),c.copy(d),n.update();break;default:_=M}}}),!1),window.addEventListener("keydown",(function(e){if(!1!==n.enabled&&!0!==n.noKeys&&!0!==n.noPan)switch(e.keyCode){case n.keys.UP:n.pan(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:n.pan(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:n.pan(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:n.pan(-n.keyPanSpeed,0),n.update()}}),!1),this.update()},s.OrbitControls.prototype=Object.create(s.EventDispatcher.prototype);var a=o.DOMWidgetModel.extend({defaults:i.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"BraketModel",_view_name:"BraketView",_model_module:"evince",_view_module:"evince",_model_module_version:"0.1.0",_view_module_version:"0.1.0"})}),r=o.DOMWidgetView.extend({render:function(){const e=new s.Scene;this.scene=e;let t=new s.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);this.camera=t,t.position.z=5;const n=new s.WebGLRenderer;this.renderer=n,n.setSize(.5*window.innerWidth,.5*window.innerHeight),this.renderer.setClearColor(986927,1),n.antialias=!0;let o=new s.OrbitControls(this.camera,this.renderer.domElement);this.controls=o,this.init_changed(),this.el.append(this.renderer.domElement),this.ao_changed(),this.model.on("change:init",this.init_changed,this),this.model.on("change:ao",this.ao_changed,this),this.animate()},animate:function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera);for(let e=0;e<this.scene.children.length;e++)performance.now(),this.scene.children[e].material.uniforms.time.value+=1e-4},init_changed:function(){this.pos=this.model.get("pos"),this.masses=this.model.get("masses"),this.colors=this.model.get("colors");for(let e=0;e<this.pos.length;e++){let t=new s.MeshStandardMaterial({color:"rgb("+[this.colors[e][0],this.colors[e][1],this.colors[e][2]].join(",")+")"});t.metalness=.1;let n=new s.SphereGeometry(.1*this.masses[e]),o=new s.Mesh(n,t);o.position.x=this.pos[e][0],o.position.y=this.pos[e][1],o.position.z=this.pos[e][2],this.scene.add(o),n.dispose(),t.dispose()}new s.AmbientLight(2105376,5),new s.DirectionalLight(16777215,.5).position.set(1,1,1)},pos_changed:function(){this.pos=this.model.get("pos");for(let e=0;e<this.pos.length;e++){let t=this.pos[e],n=this.scene.children[e];n.position.x=t[0],n.position.y=t[1],n.position.z=t[2]}},surf_changed:function(){this.surf=this.model.get("surf");for(let e=0;e<this.surf.length;e++){let e=new s.ShaderMaterial({uniforms:{time:{value:0},resolution:{value:new s.Vector2}},vertexShader:"uniform float time;\n            uniform vec2 resolution;\n            varying vec2 vUv;\n            varying vec3 pos;\n            varying vec3 tex;\n\n            void main() {\n                vUv = uv;\n                pos = vec3(position.x, position.y, position.z);\n                tex = vec3(position.x+time, position.y, position.z);\n                //pos = vec3(position.x + time * resolution.x, position.y + time * resolution.y, position.z);\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n            }",fragmentShader:"uniform vec3 user_color;\nuniform float time;\n\nvarying vec2 vUv;\nvarying vec3 pos;\nvarying vec3 tex;\nvarying float q;\n\nvoid main() {\n\nvec2 p = vUv;\nfloat q = tex[0]*tex[0] + tex[1]*tex[1] + tex[2]*tex[2];\n\n    gl_FragColor = gl_FragColor + .01*vec4(.5 + 1.7369481664870148*sqrt(15)*pow(3.141592653589793, -0.75)*tex[2]*(pow(tex[0], 2) - pow(tex[1], 2))*exp(-pow(tex[0], 2) - pow(tex[1], 2) - pow(tex[2], 2)), 0.2, 0.5, 0.5);\n}",side:s.DoubleSide,blending:s.SubtractiveBlending});e.depthWrite=!1;let t=new s.BufferGeometry;t.setIndex(this.surf[1]),t.addAttribute("position",new s.Float32BufferAttribute(this.surf[0],3)),new s.Mesh(t,e)}},ao_changed:function(){this.ao=this.model.get("ao");var e=this.model.get("fragment_shader");console.log("ao changed");let t=new s.ShaderMaterial({uniforms:{time:{value:1},resolution:{value:new s.Vector2}},vertexShader:"uniform float time;\n        uniform vec2 resolution;\n        varying vec2 vUv;\n        varying vec3 pos;\n        varying vec3 tex;\n\n        void main() {\n            vUv = uv;\n            pos = vec3(position.x, position.y, position.z);\n            tex = vec3(position.x, position.y, position.z);\n            //pos = vec3(position.x + time * resolution.x, position.y + time * resolution.y, position.z);\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n        }",fragmentShader:e,side:s.DoubleSide,blending:s.AdditiveBlending});t.depthWrite=!1;for(let e=1;e<200;e++){let n=new s.SphereBufferGeometry(.05*e,10,10),o=new s.Mesh(n,t);this.scene.add(o)}}});e.exports={BraketModel:a,BraketView:r}},163:(e,t,n)=>{var o=n(337),i=n(431),s=o.DOMWidgetModel.extend({defaults:i.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"HelloModel",_view_name:"HelloView",_model_module:"evince",_view_module:"evince",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"Hello World!"})}),a=o.DOMWidgetView.extend({render:function(){this.value_changed(),this.model.on("change:value",this.value_changed,this)},value_changed:function(){this.el.textContent=this.model.get("value")}});e.exports={HelloModel:s,HelloView:a}},568:(e,t,n)=>{e.exports=n(163),e.exports=n(580),e.exports.version=n(147).version},147:e=>{"use strict";e.exports={version:"0.1.0"}}}]);